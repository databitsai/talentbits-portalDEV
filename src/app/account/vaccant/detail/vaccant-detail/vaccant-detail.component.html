<div class="p-p-3">

    <form [formGroup]="checkDetailForm" novalidate>
        <!-- Cabecera -->
        <p-card class="p-m-3" [header]="company.name" [subheader]="'Empresa'">
            <div class="p-grid p-fluid">
                <div class="p-col-12 p-md-4">
                    <div class="muli-bold">
                        {{ company.website }}
                    </div>
                    <div>
                        Sitio web
                    </div>
                </div>
                <div class="p-col-12 p-md-4">
                    <div class="muli-bold">
                        {{ getIndustrySector(company.sector) }}
                    </div>
                    <div>
                        Sector
                    </div>
                </div>
                <div class="p-col-12 p-md-4">
                    <div class="muli-bold">
                        {{ getCountry(company.country) }}
                    </div>
                    <div>
                        Ubicación
                    </div>
                </div>
            </div>
        </p-card>
        
        <!-- Cuerpo  -->
        <p-card class="p-m-3">
            <div class="p-grid p-fluid">
                <div class="p-col-12 p-md-4">
                    <label for="title">Nombre de la vacante:*</label>
                    <input type="text" pInputText id="title" formControlName="title" required />
                    <div *ngIf="checkDetailForm.get('title')?.invalid && (checkDetailForm.get('title')?.dirty || checkDetailForm.get('title')?.touched)">
                        <div *ngIf="checkDetailForm.get('title')?.errors?.required">
                            <small class="p-error">{{'t.validateRequiredField' | translate}}</small>
                        </div>
                    </div>     
                </div>
                <div class="p-col-12 p-md-2">
                    <label for="yearsExperience">Años de experiencia:*</label>
                    <p-inputNumber inputId="integeronly" id="yearsExperience" formControlName="yearsExperience" yearsExperience ></p-inputNumber>
                    <div *ngIf="checkDetailForm.get('yearsExperience')?.invalid && (checkDetailForm.get('yearsExperience')?.dirty || checkDetailForm.get('yearsExperience')?.touched)">
                        <div *ngIf="checkDetailForm.get('yearsExperience')?.errors?.required">
                            <small class="p-error">{{'t.validateRequiredField' | translate}}</small>
                        </div>
                    </div>  
                </div>
                <div class="p-col-12 p-md-2">
                    <label for="workingDayType">Tipo de jornada:*</label>
                    <p-dropdown [options]="workingDay" formControlName="workingDayType" optionLabel="label" optionValue="code" placeholder="Seleccione"></p-dropdown>
                    <div *ngIf="checkDetailForm.get('workingDayType')?.invalid && (checkDetailForm.get('workingDayType')?.dirty || checkDetailForm.get('workingDayType')?.touched)">
                        <div *ngIf="checkDetailForm.get('workingDayType')?.errors?.required">
                            <small class="p-error">{{'t.validateRequiredField' | translate}}</small>
                        </div>
                    </div>
                </div>
                <div class="p-col-12 p-md-2">
                    <label for="currencyType">Moneda:*</label>
                    <p-dropdown [options]="currencyType" formControlName="currencyType" optionLabel="label" optionValue="code" placeholder="Seleccione"></p-dropdown>
                    <div *ngIf="checkDetailForm.get('currencyType')?.invalid && (checkDetailForm.get('currencyType')?.dirty || checkDetailForm.get('currencyType')?.touched)">
                        <div *ngIf="checkDetailForm.get('currencyType')?.errors?.required">
                            <small class="p-error">{{'t.validateRequiredField' | translate}}</small>
                        </div>
                    </div>
                </div>
                <div class="p-col-12 p-md-2">
                    <label for="currencyType">Salario mensual:* <i class="pi pi-info-circle p-pr-2" pTooltip="Esta opción no será visible en la vacante"></i></label>
                    <p-inputNumber mode="decimal" id="salary" formControlName="salary" [minFractionDigits]="2"></p-inputNumber>
                    <div *ngIf="checkDetailForm.get('salary')?.invalid && (checkDetailForm.get('salary')?.dirty || checkDetailForm.get('salary')?.touched)">
                        <div *ngIf="checkDetailForm.get('salary')?.errors?.required">
                            <small class="p-error">{{'t.validateRequiredField' | translate}}</small>
                        </div>
                    </div>  
                </div>
            </div>

            <br><br>
            <div class="p-grid p-fluid">

                <div class="p-col-12 p-md-4 p-lg-4 p-formgroup p-mb-5 p-mt-3">
                    <label>Modalidad:*</label>
                    <div class="p-col-12 p-md-3">
                        <div *ngFor="let type of mobility" class="p-field-checkbox">
                            <p-radioButton [inputId]="'type' + type.code" name="type" [value]="type.code" [(ngModel)]="mobilityType" [ngModelOptions]="{ standalone: true }" 
                            (onClick)="checkDetailForm.get('mobilityType')?.setValue(this.mobilityType)">
                            </p-radioButton>
                            
                            <label [for]="'type' + type.code">{{ type.label }}</label>
                        </div>
                        <div *ngIf="checkDetailForm.get('mobilityType')?.invalid && (checkDetailForm.get('mobilityType')?.dirty || checkDetailForm.get('mobilityType')?.touched)">
                            <div *ngIf="checkDetailForm.get('mobilityType')?.errors?.required">
                                <small class="p-error">{{"t.validateRequiredField" | translate}}</small>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="p-col-12 p-md-4 p-lg-4 p-formgroup p-mb-5 p-mt-3">
                    <label>Destacar vacante:* <i class="pi pi-info-circle p-pr-2" pTooltip="Mejore su plan para habilitar esta opción"></i></label>
                    <div class="p-col-12 p-md-3">
                        <div *ngFor="let type of categoriesVacantIsoutstanding" class="p-field-checkbox">
                            <p-radioButton [inputId]="'type' + type.code" name="type" [value]="type.code" [(ngModel)]="isOutstanding" [ngModelOptions]="{ standalone: true }" (onClick)="checkDetailForm.get('isOutstanding')?.setValue(this.isOutstanding)" [disabled]="isOutstandingVaccantDisabled">
                            </p-radioButton>
                            <label [for]="'type' + type.code">{{ type.name }}</label>
                        </div>
                        <div *ngIf="checkDetailForm.get('isOutstanding')?.invalid && (checkDetailForm.get('isOutstanding')?.dirty || checkDetailForm.get('isOutstanding')?.touched)">
                            <div *ngIf="checkDetailForm.get('isOutstanding')?.errors?.required">
                                <small class="p-error">{{"t.validateRequiredField" | translate}}</small>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="p-col-12 p-md-4 p-lg-4 p-formgroup p-mb-5 p-mt-3">
                    <label>Activar vacante:* <i class="pi pi-info-circle p-pr-2" pTooltip="Activar/Desactivar vacante"></i></label>
                    <div class="p-col-12 p-md-3">
                        <div *ngFor="let type of categoriesVacantIsOpen" class="p-field-checkbox">
                            <p-radioButton [inputId]="'type' + type.code" name="type" [value]="type.code" [(ngModel)]="isPublic" [ngModelOptions]="{ standalone: true }" (onClick)="checkDetailForm.get('isPublic')?.setValue(this.isPublic)">
                            </p-radioButton>
                            <label [for]="'type' + type.code">{{ type.name }}</label>
                        </div>
                        <div *ngIf="checkDetailForm.get('isPublic')?.invalid && (checkDetailForm.get('isPublic')?.dirty || checkDetailForm.get('isPublic')?.touched)">
                            <div *ngIf="checkDetailForm.get('isPublic')?.errors?.required">
                                <small class="p-error">{{"t.validateRequiredField" | translate}}</small>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <div class="p-fluid p-formgrid p-grid">
                <div class="p-field p-col">
                    <label for="validFrom">Inicio: *</label>
                    <p-calendar formControlName="validFrom" [minDate]="minDateStart" [touchUI]="true"
                        [readonlyInput]="true" inputId="validFrom" appendTo="body" [showTime]="true"
                        selectionMode="single" [dateFormat]="formatCalendarFormat"
                        (onSelect)="onStartDateChange($event)">
                    </p-calendar>
                    <div *ngIf="checkDetailForm.get('validFrom')?.invalid &&
                    (checkDetailForm.get('validFrom')?.dirty ||
                    checkDetailForm.get('validFrom')?.touched)">
                        <div *ngIf="checkDetailForm.get('validFrom')?.errors?.required">
                            <small class="p-error">{{"t.validateRequiredField" | translate}}</small>
                        </div>
                        <div *ngIf="checkDetailForm.get('validFrom')?.errors?.maxlength">
                            <small class="p-error">{{'t.validateMaxLength' | translate}}</small>
                        </div>
                    </div>
                </div>
                <div class="p-field p-col">
                    <label for="validUntil">Fin: *</label>
                    <p-calendar formControlName="validUntil" [minDate]="minDateEnd" [touchUI]="true"
                        [readonlyInput]="true" inputId="validUntil" appendTo="body" [showTime]="true"
                        selectionMode="single" [dateFormat]="formatCalendarFormat">
                    </p-calendar>
                    <div *ngIf="checkDetailForm.get('validUntil')?.invalid &&
                    (checkDetailForm.get('validUntil')?.dirty ||
                    checkDetailForm.get('validUntil')?.touched)">
                        <div *ngIf="checkDetailForm.get('validUntil')?.errors?.required">
                            <small class="p-error">{{"t.validateRequiredField" | translate}}</small>
                        </div>
                    </div>
                </div>
            </div>
            
            <br>
            <label for="responsabilitiesContent">Responsabilidades por puesto:*</label>
            <p-editor [style]="{'height':'200px'}" formControlName="responsabilitiesContent"></p-editor>
            <div *ngIf="checkDetailForm.get('responsabilitiesContent')?.invalid && (checkDetailForm.get('responsabilitiesContent')?.dirty || checkDetailForm.get('responsabilitiesContent')?.touched)">
                <div *ngIf="checkDetailForm.get('responsabilitiesContent')?.errors?.required">
                    <small class="p-error">{{'t.validateRequiredField' | translate}}</small>
                </div>
            </div>
            <br>
            <label for="knowledgeContent">El candidato ideal debe tener/saber:*</label>
            <p-editor  [style]="{'height':'200px'}" formControlName="knowledgeContent"></p-editor>
            <div *ngIf="checkDetailForm.get('knowledgeContentContainer')?.invalid && (checkDetailForm.get('knowledgeContentContainer')?.dirty || checkDetailForm.get('knowledgeContentContainer')?.touched)">
                <div *ngIf="checkDetailForm.get('knowledgeContentContainer')?.errors?.required">
                    <small class="p-error">{{'t.validateRequiredField' | translate}}</small>
                </div>
            </div>
            <br>
            <div class="p-grid p-fluid">
                <div class="p-col-12 p-md-12">
                    <label for="extraPointsDescription">Punto extras por:*</label>
                    <p-editor  [style]="{'height':'200px'}" formControlName="extraPointsDescription"></p-editor>
                    <div *ngIf="checkDetailForm.get('extraPointsDescription')?.invalid && (checkDetailForm.get('extraPointsDescription')?.dirty || checkDetailForm.get('extraPointsDescription')?.touched)">
                        <div *ngIf="checkDetailForm.get('extraPointsDescription')?.errors?.required">
                            <small class="p-error">{{'t.validateRequiredField' | translate}}</small>
                        </div>
                    </div>
                </div>
            </div>

        </p-card>

        <br>
        <div class="p-grid p-fluid">
            <div class="p-col-12 p-md-3">
            </div>
            <div class="p-col-12 p-md-3">
                <button pButton pRipple label="Anterior" icon="pi pi-arrow-left" class="p-button-success p-mr-2"  [routerLink]="['/account/vaccant/main']"></button>
            </div>
            <div class="p-col-12 p-md-3">
                <button pButton pRipple label="Siguiente" icon="pi pi-arrow-right" class="p-button-warning p-mr-2" (click)="saveItemOnSessionStorage()"></button>
            </div>
            <div class="p-col-12 p-md-3">
            </div>
        </div>

    </form>
</div>
<ngx-spinner name="load" type="ball-clip-rotate-multiple" size="medium" bdColor="rgba(0,0,0,0.5)">
    <p style="font-size: 14px; color: white">{{'t.waiting' | translate}}</p>
</ngx-spinner>